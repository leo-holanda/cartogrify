<p-dialog
  header="Choose the content you want to share"
  [(visible)]="shareMode"
  [style]="{ width: '35rem' }"
  [modal]="true"
>
  <div class="download-options">
    <p-button (onClick)="shareMap()" label="Map"></p-button>
    <p-button (onClick)="shareRanking()" label="Ranking"></p-button>
  </div>
</p-dialog>
<div #mapWrapper class="map-wrapper" [style]="{ background: mapBackgroundColor }">
  <div [ngStyle]="{ visibility: shareMode ? 'collapse' : 'visible' }" class="map-buttons">
    <p-button
      (onClick)="op.toggle($event)"
      label="Change color theme"
      icon="pi pi-palette"
      styleClass="p-button-sm"
    ></p-button>
    <p-button
      (onClick)="onShareButtonClick()"
      label="Share with your friends"
      icon="pi pi-share-alt"
      styleClass="p-button-sm"
    ></p-button>
    <p-overlayPanel #op>
      <div class="color-theme-selector">
        <label class="map-color-palette" for="map-color-palette">Color Palette</label>
        <p-listbox
          [options]="colorPalettes"
          optionLabel="name"
          [listStyle]="{ 'max-height': '250px' }"
          (onClick)="onColorPaletteSelect($event)"
        >
          <ng-template let-palette pTemplate="item">
            <div>
              <div>{{ palette.title }}</div>
              <div class="palette-colors-array">
                <div
                  *ngFor="let color of palette.colors"
                  style="width: 1rem; height: 1rem"
                  [ngStyle]="{ background: color }"
                ></div>
              </div>
            </div> </ng-template
        ></p-listbox>
        <div class="map-background-input-wrapper">
          <label for="background">Background Color</label>
          <div class="map-background-input">
            <p-radioButton
              name="dark-background"
              value="rgb(50, 50, 50)"
              [(ngModel)]="mapBackgroundColor"
              inputId="dark-background"
            ></p-radioButton>
            <label for="dark-background">Dark</label>
          </div>
          <div class="map-background-input">
            <p-radioButton
              name="light-background"
              value="rgb(255, 255, 255)"
              [(ngModel)]="mapBackgroundColor"
              inputId="light-background"
            ></p-radioButton>
            <label for="light-background">Light</label>
          </div>
          <div class="map-background-input">
            <p-radioButton
              name="blue-background"
              value="rgb(156, 192, 249)"
              [(ngModel)]="mapBackgroundColor"
              inputId="blue-background"
            ></p-radioButton>
            <label for="blue-background">Light blue</label>
          </div>
          <div class="map-background-input">
            <p-radioButton
              name="light-brown-background"
              value="rgb(229, 220, 203)"
              [(ngModel)]="mapBackgroundColor"
              inputId="light-brown-background"
            ></p-radioButton>
            <label for="light-brown-background">Light brown</label>
          </div>
          <div class="map-background-input">
            <p-radioButton
              name="dark-brown-background"
              value="rgb(214, 187, 140)"
              [(ngModel)]="mapBackgroundColor"
              inputId="dark-brown-background"
            ></p-radioButton>
            <label for="dark-brown-background">Dark brown</label>
          </div>
        </div>
      </div>
    </p-overlayPanel>
  </div>
  <div [ngStyle]="{ visibility: shareMode ? 'visible' : 'collapse' }" class="map-title">
    <h1>Your map</h1>
  </div>
  <div class="logo">
    <h1>cartogrify</h1>
  </div>
</div>
